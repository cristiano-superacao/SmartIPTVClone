# ğŸ“º SmartIPTV Clone v2.0 - Gerenciador de MÃºltiplas Playlists

## ğŸ†• Nova Funcionalidade: MÃºltiplas Playlists com Editor Visual

### âœ¨ O que hÃ¡ de novo?

Agora vocÃª pode **adicionar e gerenciar mÃºltiplas listas IPTV** de diferentes fontes, com suporte a:

- ğŸ“ **M3U URL** - Links diretos para arquivos M3U/M3U8
- ğŸ” **Xtream Codes API** - Formato profissional com usuÃ¡rio/senha
- ğŸŒ **Stalker Portal** - Para dispositivos MAG e similares

### ğŸ¨ Editor Visual Profissional

- **Logos Personalizados**: Adicione imagens para cada playlist
- **Cores TemÃ¡ticas**: Escolha cores Ãºnicas via color picker
- **Interface Responsiva**: Design moderno e intuitivo
- **Gerenciamento Completo**: Criar, editar, ativar e excluir playlists

---

## ğŸ“¸ Preview

### Tela do Gerenciador
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Gerenciar Playlists        [+] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ–¼ï¸ Lista Brasil IPTV          â”‚
â”‚     205 canais â€¢ m3u_url       â”‚
â”‚     [Ativar] [âœï¸] [ğŸ—‘ï¸]        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ–¼ï¸ TV On-Line Xtream          â”‚
â”‚     150 canais â€¢ xtream        â”‚
â”‚     [Ativar] [âœï¸] [ğŸ—‘ï¸]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### FormulÃ¡rio de CriaÃ§Ã£o
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [X]  Nova Playlist             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“· [Adicionar Logo]            â”‚
â”‚                                 â”‚
â”‚  Nome: ________________         â”‚
â”‚  DescriÃ§Ã£o: ___________         â”‚
â”‚                                 â”‚
â”‚  Tipo: [M3U] [Xtream] [Stalker]â”‚
â”‚                                 â”‚
â”‚  Servidor: _____________        â”‚
â”‚  UsuÃ¡rio: ______________        â”‚
â”‚  Senha: ****************        â”‚
â”‚                                 â”‚
â”‚  Cor: [#007AFF] [ğŸ¨]           â”‚
â”‚                                 â”‚
â”‚  [âœ“ Salvar Playlist]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ Como Usar

### 1. Acessar o Gerenciador

1. Abra o aplicativo
2. VÃ¡ em **ConfiguraÃ§Ãµes** (Ã­cone âš™ï¸)
3. Toque em **"Gerenciar Playlists"**

### 2. Adicionar Nova Playlist

#### ğŸ“ Usando M3U URL (Simples)

1. Toque no botÃ£o **+** (FAB)
2. Selecione **"M3U URL"**
3. Preencha:
   - **Nome**: Ex: "Minha Lista IPTV"
   - **URL**: `https://servidor.com/lista.m3u`
4. (Opcional) Adicione logo e escolha cor
5. Toque em **"Salvar Playlist"**
6. Toque em **"Ativar"** para carregar os canais

#### ğŸ” Usando Xtream Codes (Profissional)

1. Toque no botÃ£o **+**
2. Selecione **"Xtream Codes"**
3. Preencha:
   - **Nome**: Ex: "TV Premium"
   - **Servidor**: `https://dt323.com`
   - **UsuÃ¡rio**: `682585541`
   - **Senha**: `830433664`
4. (Opcional) Personalize logo e cor
5. Salve e ative

**Exemplo Real (Screenshot):**
```
Servidor: https://dt323.com
Porta: 80
UsuÃ¡rio: 682585541
Senha: 830433664
Formato: m3u_plus
Output: ts
```

### 3. Gerenciar Playlists

- **Ativar**: Carrega os canais do servidor
- **Editar** âœï¸: Alterar nome, logo, cor
- **Excluir** ğŸ—‘ï¸: Remove a playlist
- **Atualizar**: Arraste para baixo (pull-to-refresh)

---

## ğŸ› ï¸ InstalaÃ§Ã£o e Desenvolvimento

### PrÃ©-requisitos

- Node.js 18+
- npm ou yarn
- Expo CLI (para mobile)

### Backend

```bash
cd backend
npm install
node index.js
```

**Servidor rodarÃ¡ em:** `http://localhost:3000`

### Frontend

```bash
npm install
npm start
# ou
expo start
```

### DependÃªncias Adicionais

```bash
# Se nÃ£o instalado
npm install expo-image-picker react-native-wheel-color-picker
```

---

## ğŸ“¡ API Endpoints

### Playlists

| MÃ©todo | Endpoint | DescriÃ§Ã£o |
|--------|----------|-----------|
| `POST` | `/api/playlists` | Criar nova playlist |
| `GET` | `/api/playlists` | Listar todas |
| `GET` | `/api/playlists/:id` | Buscar especÃ­fica |
| `PUT` | `/api/playlists/:id` | Atualizar |
| `DELETE` | `/api/playlists/:id` | Excluir |
| `POST` | `/api/playlists/:id/activate` | Ativar e carregar canais |
| `POST` | `/api/playlists/:id/refresh` | Atualizar canais |
| `GET` | `/api/playlists/:id/stats` | EstatÃ­sticas |

### Exemplo de Uso (cURL)

```bash
# Criar playlist
curl -X POST http://localhost:3000/api/playlists \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Lista Brasil",
    "serverType": "m3u_url",
    "serverUrl": "https://iptv-org.github.io/iptv/countries/br.m3u"
  }'

# Listar playlists
curl http://localhost:3000/api/playlists

# Ativar playlist
curl -X POST http://localhost:3000/api/playlists/PLAYLIST_ID/activate
```

### Exemplo PowerShell

```powershell
# Teste completo automatizado
.\test-playlists.ps1
```

---

## ğŸ“ Estrutura do Projeto

```
CS_Criador/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ activation.js
â”‚   â”‚   â”œâ”€â”€ channels.js
â”‚   â”‚   â”œâ”€â”€ groups.js
â”‚   â”‚   â””â”€â”€ playlists.js          â­ NOVO
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ channelService.js
â”‚   â”‚   â”œâ”€â”€ m3uParser.js
â”‚   â”‚   â””â”€â”€ playlistService.js    â­ NOVO
â”‚   â””â”€â”€ index.js
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ Activation/
â”‚   â”‚   â”œâ”€â”€ ChannelList/
â”‚   â”‚   â”œâ”€â”€ Playlists/
â”‚   â”‚   â”‚   â””â”€â”€ PlaylistManager.js â­ NOVO
â”‚   â”‚   â””â”€â”€ VideoPlayer/
â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”œâ”€â”€ HomeScreen.js
â”‚   â”‚   â”œâ”€â”€ SettingsScreen.js     â­ ATUALIZADO
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ services/
â”‚       â””â”€â”€ api.js                 â­ ATUALIZADO
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ PLAYLIST_MANAGER.md        â­ NOVO
â”‚   â”œâ”€â”€ TESTE_PLAYLISTS.md         â­ NOVO
â”‚   â””â”€â”€ IMPLEMENTACAO_PLAYLISTS.md â­ NOVO
â”œâ”€â”€ test-playlists.ps1             â­ NOVO
â””â”€â”€ README.md
```

---

## ğŸ§ª Testes

### Teste Automatizado (PowerShell)

```powershell
# Certifique-se que o backend estÃ¡ rodando
node backend\index.js

# Em outro terminal
.\test-playlists.ps1
```

**O script testa:**
1. âœ… Health check
2. âœ… Criar playlist M3U
3. âœ… Criar playlist Xtream
4. âœ… Listar playlists
5. âœ… Ativar playlist
6. âœ… Buscar estatÃ­sticas
7. âœ… Atualizar playlist

### Teste Manual

Siga o guia completo em: `docs/TESTE_PLAYLISTS.md`

---

## ğŸ¯ Tipos de Servidor Suportados

### 1. M3U URL ğŸ“
**Mais simples, apenas URL necessÃ¡ria**

```json
{
  "serverType": "m3u_url",
  "serverUrl": "https://servidor.com/lista.m3u"
}
```

**URL gerada:** URL direta do arquivo

---

### 2. Xtream Codes API ğŸ”
**Formato profissional com credenciais**

```json
{
  "serverType": "xtream",
  "serverUrl": "https://dt323.com",
  "username": "682585541",
  "password": "830433664",
  "outputFormat": "m3u_plus"
}
```

**URL gerada:**
```
https://dt323.com/get.php?username=682585541&password=830433664&type=m3u_plus&output=ts
```

**Formatos disponÃ­veis:**
- `m3u` - M3U bÃ¡sico
- `m3u_plus` - M3U com EPG (recomendado)
- `m3u8` - HTTP Live Streaming
- `ts` - Transport Stream

---

### 3. Stalker Portal ğŸŒ
**Para dispositivos MAG e STB**

```json
{
  "serverType": "stalker",
  "serverUrl": "https://portal.com",
  "username": "user",
  "password": "pass"
}
```

**URL gerada:**
```
https://portal.com/portal.php?type=itv&action=get_ordered_list&genre=*&force_ch_link_check=&fav=0&sortby=number&hd=0&JsHttpRequest=1-xml
```

---

## ğŸ¨ PersonalizaÃ§Ã£o Visual

### Logos
- **Formatos aceitos**: JPG, PNG, WebP
- **Tamanho recomendado**: 400x400px
- **Aspect ratio**: 1:1 ou 4:3
- **Upload via**: Galeria do dispositivo

### Cores
- **Seletor**: Color picker interativo
- **Formato**: CÃ³digos HEX (#RRGGBB)
- **Cores prÃ©-definidas**:
  - Azul: `#007AFF` (padrÃ£o)
  - Verde: `#4CAF50`
  - Vermelho: `#F44336`
  - Roxo: `#9C27B0`
  - Laranja: `#FF9800`

---

## ğŸ“Š EstatÃ­sticas

Ao ativar uma playlist, vocÃª recebe:

```json
{
  "totalChannels": 205,
  "totalGroups": 32,
  "channelsWithLogo": 180,
  "channelsWithTvgId": 195
}
```

---

## ğŸ”„ MigraÃ§Ã£o do Sistema Antigo

### Compatibilidade
âœ… O sistema antigo continua funcionando  
âœ… Rota `/api/activate` mantida  
âœ… Novo sistema usa `/api/playlists`

### Vantagens do Novo Sistema
- âœ… MÃºltiplas listas simultÃ¢neas
- âœ… 3 tipos de servidor (vs 1)
- âœ… Editor visual completo
- âœ… Logos e cores personalizadas
- âœ… Melhor gerenciamento

---

## ğŸ› Troubleshooting

### Erro: "URL do servidor Ã© obrigatÃ³rio"
â¡ï¸ Preencha o campo "Servidor" ou "URL"

### Erro: "UsuÃ¡rio e senha sÃ£o obrigatÃ³rios"
â¡ï¸ Para Xtream/Stalker, ambos campos sÃ£o necessÃ¡rios

### Erro: "Erro ao carregar playlist"
â¡ï¸ Verifique:
- ConexÃ£o de internet
- Credenciais do servidor
- URL correta
- Servidor online

### Lista vazia apÃ³s ativar
â¡ï¸ PossÃ­veis causas:
- Servidor offline
- Formato M3U invÃ¡lido
- Credenciais incorretas

### Backend nÃ£o inicia
```powershell
# Parar processo na porta 3000
Stop-Process -Id (Get-NetTCPConnection -LocalPort 3000).OwningProcess -Force

# Reiniciar
node backend\index.js
```

---

## ğŸ“š DocumentaÃ§Ã£o Completa

- **Guia do UsuÃ¡rio**: `docs/PLAYLIST_MANAGER.md`
- **Guia de Testes**: `docs/TESTE_PLAYLISTS.md`
- **ImplementaÃ§Ã£o TÃ©cnica**: `docs/IMPLEMENTACAO_PLAYLISTS.md`
- **API Original**: `docs/API.md`

---

## ğŸš€ PrÃ³ximas Melhorias

- [ ] PersistÃªncia em banco de dados (MongoDB/SQLite)
- [ ] Agendamento de atualizaÃ§Ã£o automÃ¡tica
- [ ] SincronizaÃ§Ã£o entre dispositivos
- [ ] Backup/restore de playlists
- [ ] Compartilhamento de listas
- [ ] Editor individual de canais
- [ ] ReordenaÃ§Ã£o de canais via drag-drop
- [ ] Grupos/categorias personalizadas
- [ ] Teste de velocidade de servidor
- [ ] NotificaÃ§Ãµes de lista offline

---

## ğŸ“ Changelog

### v2.0.0 (12/01/2025)
- âœ¨ **NOVO**: Sistema de mÃºltiplas playlists
- âœ¨ **NOVO**: Suporte a Xtream Codes API
- âœ¨ **NOVO**: Suporte a Stalker Portal
- âœ¨ **NOVO**: Editor visual com logos e cores
- âœ¨ **NOVO**: 8 endpoints de API
- âœ¨ **NOVO**: Componente PlaylistManager (850+ linhas)
- âœ¨ **NOVO**: DocumentaÃ§Ã£o completa
- ğŸ”§ **MELHORIA**: Interface profissional e responsiva

### v1.0.0
- âœ… Sistema bÃ¡sico com M3U URL Ãºnico
- âœ… Player de vÃ­deo
- âœ… Lista de canais
- âœ… Favoritos e histÃ³rico

---

## ğŸ‘¥ Contribuindo

ContribuiÃ§Ãµes sÃ£o bem-vindas! Por favor:

1. Fork o projeto
2. Crie uma branch: `git checkout -b feature/nova-funcionalidade`
3. Commit: `git commit -m 'Adiciona nova funcionalidade'`
4. Push: `git push origin feature/nova-funcionalidade`
5. Abra um Pull Request

---

## ğŸ“„ LicenÃ§a

Este projeto Ã© open source e estÃ¡ disponÃ­vel sob a [MIT License](LICENSE).

---

## ğŸ†˜ Suporte

- **DocumentaÃ§Ã£o**: `docs/`
- **Issues**: [GitHub Issues](https://github.com/seu-usuario/smartiptv-clone/issues)
- **Email**: suporte@exemplo.com

---

## ğŸŒŸ Agradecimentos

- [IPTV-org](https://github.com/iptv-org/iptv) - Listas IPTV gratuitas
- [Xtream Codes](https://github.com/tellytv/go.xtream-codes) - DocumentaÃ§Ã£o da API
- Comunidade React Native e Expo

---

**Desenvolvido com â¤ï¸ por SmartIPTV Clone Team**  
**VersÃ£o 2.0.0** | Janeiro 2025
